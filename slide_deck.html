<!DOCTYPE html>
<html>
  <head>
    <title>Introducing R/Tidyverse to Clinical Statistical Programming</title>
    <meta charset="utf-8">
    <meta name="author" content="Freeman Wang, @freestatman" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="bssi.css" type="text/css" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introducing <span style="color:red">R/Tidyverse</span> to Clinical Statistical Programming
## MBSW 2018
### Freeman Wang, <span class="citation">@freestatman</span>
### 2018-05-15 <br><br> Slides available at <a href="https://bit.ly/2KNKALU" class="uri">https://bit.ly/2KNKALU</a>

---


layout: true
.footer[Slides available at &lt;span style="color:skyblue"&gt;https://bit.ly/2KNKALU &lt;/span&gt;]

---



layout: true

---
# Where are my biases 

* Biomarker Statistician
* Genomic Data Scientist and Bioinformatician
* Visualization Engineer
* R/Shiny Developer
* Long time Linux/HPC/Vim user
--

* &lt;span style="color:grey"&gt;SAS Certified Base and Advanced Programmer &lt;/span&gt;

---
# Disclaimer

1. All the data and info in this talk are public (Twitter, GitHub). 
    - CDISC example data were downloaded from: [GitHub](https://github.com/phuse-org/phuse-scripts/tree/master/data)

2. This talk represents my own views, not those of BSSI. 
    - BSSI does not have an opinion of which tool you should use: e.g. SAS vs R, or R/base vs R/Tidyverse.

---

# Why? Why so popular (1/2)
- **Not** about the good-looking plots, or the fancy manipulation functions
- Content-driven and communication-focused workflow (logic-flow)
- Concisely expresses human logic as R code
    * Fast human logic I/O
    * Yourself ↔️ team / customer
    * Past you ➡️ present you
- Seamlessly align multiple layers of logic, across analysis objective, programming, and output

   
---

# Why? Why so popular (2/2)
- structured domains of workflow, and well-defined verb/vocabulary within each domain
   * grammer of data manipulation (dplyr)
   * grammer of data visualizaiton (ggplot2)
   * grammer of statistics (not mature yet... SAS is the standard.)
- consistent design:  
   * __learn it once, use it everywhere__

---

# How? Tidy principles

1. Tidy data (Shared data structures)
2. Tidy programming API (Compose simple pieces)
3. The pipe! (functional programming for Human logic)
4. Tidy statistics

&lt;!-- This talk will demonstrate Tidyverse workflow through  --&gt;
&lt;!-- * on-line examples --&gt;
&lt;!-- * clinical and statistical programming examples --&gt;


---
# Tidyverse: core packages

&lt;center&gt;
&lt;a href="https://www.tidyverse.org/"&gt; 
&lt;img src="img/tidyverse0.png" width="600px"/&gt;
&lt;/a&gt;
&lt;/center&gt;

.footer[https://www.tidyverse.org/]

---
# Tidyverse: more packages 

Clinical programming is one of Data Science
&lt;!-- * **data manipulation**, **exploration**  --&gt;
&lt;!-- * **visualization**, **reporting** --&gt;

&lt;center&gt;
&lt;a href="http://gph.is/1VD6OCF"&gt; 
&lt;img src="img/tidyverse1.png" width="600px"/&gt;
&lt;/a&gt;
&lt;/center&gt;

.footer[http://r4ds.had.co.nz/]

&lt;!-- - Importing data  --&gt;
&lt;!-- - Tidying data  --&gt;
&lt;!-- - Transforming data --&gt;
&lt;!-- - Visualizing data --&gt;
&lt;!-- - Modeling data --&gt;
&lt;!-- - Efficient programming  --&gt;

---

# A "Real" Tidyverse [Workflow](http://r4ds.had.co.nz/introduction-1.html)

&lt;center&gt;
&lt;img src="img/drob_r_pipeline_450.png" width="600px"/&gt;
&lt;/center&gt;

&lt;!-- ![](img/drob_r_pipeline_450.png) --&gt;

---

# What? Tidy data

* Each row is an observation
* Each column is a variable
* Clnical data
  - Long-format is commonly seen in data storage, e.g. SDTM/ADaM
  - Wide-format is commonly seen for DEA, modeling, and visualization
  - Align manipulaiton, statistical and visualization logic with tidy data

---

# What? Grammer of data manipulation

* `dplyr`, key verbs
  -  `select` &lt;span style="color:grey"&gt;(common verb in SQL)&lt;/span&gt;
  -  `mutate` &lt;span style="color:grey"&gt;(e.g. case_when)&lt;/span&gt;
  -  `filter`
  -  `group_by` 
  -  `summarize`
  -  `arrange`
  
* Translatable to SQL 

* [Cheatsheet](https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf)

---

# Example of Why, How&amp;What
![](img/tidyverse_vs_base.png)

* Align your manipulation visually and logically
* Convert your raw coding to more consumable coding (shorten the logic gap)

---

# What? Tidyverse extended families

From the community
* [ggplot2 extention packages](http://www.ggplot2-exts.org/gallery/)
    - survminer, cowplot, etc
* [plotly](https://plotly-book.cpsievert.me/)
* [summarytools](https://github.com/dcomtois/summarytools)
* [janitor](https://github.com/sfirke/janitor)
* [tidyversity](https://github.com/mkearney/tidyversity)
* [jsmisc](https://github.com/strengejacke/sjmisc) 
* More bioconductor packages buys in!

---

# Example 


```r
library(haven)
library(tidyverse) 
iris &lt;- haven::read_sas('data/iris.sas7bdat')
adsl &lt;- Hmisc::sasxport.get("data/adam/cdisc/adsl.xpt")
```

```
## Processing SAS dataset ADSL 	 ..
```

```r
adsl %&gt;%
    select(usubjid, contains('trt')) %&gt;% 
    DT::datatable(options = list(pageLength = 3))
```

<div id="htmlwidget-3e012f10563a25730fea" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3e012f10563a25730fea">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254"],["01-701-1015","01-701-1023","01-701-1028","01-701-1033","01-701-1034","01-701-1047","01-701-1097","01-701-1111","01-701-1115","01-701-1118","01-701-1130","01-701-1133","01-701-1146","01-701-1148","01-701-1153","01-701-1180","01-701-1181","01-701-1188","01-701-1192","01-701-1203","01-701-1211","01-701-1234","01-701-1239","01-701-1275","01-701-1287","01-701-1294","01-701-1302","01-701-1317","01-701-1324","01-701-1341","01-701-1345","01-701-1360","01-701-1363","01-701-1383","01-701-1387","01-701-1392","01-701-1415","01-701-1429","01-701-1440","01-701-1442","01-701-1444","01-702-1082","01-703-1042","01-703-1076","01-703-1086","01-703-1096","01-703-1100","01-703-1119","01-703-1175","01-703-1182","01-703-1197","01-703-1210","01-703-1258","01-703-1279","01-703-1295","01-703-1299","01-703-1335","01-703-1379","01-703-1403","01-703-1439","01-704-1008","01-704-1009","01-704-1010","01-704-1017","01-704-1025","01-704-1065","01-704-1074","01-704-1093","01-704-1114","01-704-1120","01-704-1127","01-704-1135","01-704-1164","01-704-1218","01-704-1233","01-704-1241","01-704-1260","01-704-1266","01-704-1323","01-704-1325","01-704-1332","01-704-1351","01-704-1388","01-704-1435","01-704-1445","01-705-1018","01-705-1031","01-705-1059","01-705-1186","01-705-1199","01-705-1280","01-705-1281","01-705-1282","01-705-1292","01-705-1303","01-705-1310","01-705-1349","01-705-1377","01-705-1382","01-705-1393","01-705-1431","01-706-1041","01-706-1049","01-706-1384","01-707-1037","01-707-1206","01-708-1019","01-708-1032","01-708-1084","01-708-1087","01-708-1158","01-708-1171","01-708-1178","01-708-1213","01-708-1216","01-708-1236","01-708-1253","01-708-1272","01-708-1286","01-708-1296","01-708-1297","01-708-1316","01-708-1336","01-708-1342","01-708-1347","01-708-1348","01-708-1353","01-708-1372","01-708-1378","01-708-1406","01-708-1428","01-709-1001","01-709-1007","01-709-1020","01-709-1029","01-709-1081","01-709-1088","01-709-1099","01-709-1102","01-709-1168","01-709-1217","01-709-1238","01-709-1259","01-709-1285","01-709-1301","01-709-1306","01-709-1309","01-709-1312","01-709-1326","01-709-1329","01-709-1339","01-709-1424","01-710-1002","01-710-1006","01-710-1021","01-710-1027","01-710-1045","01-710-1053","01-710-1060","01-710-1070","01-710-1077","01-710-1078","01-710-1083","01-710-1137","01-710-1142","01-710-1154","01-710-1166","01-710-1183","01-710-1187","01-710-1235","01-710-1249","01-710-1264","01-710-1270","01-710-1271","01-710-1278","01-710-1300","01-710-1314","01-710-1315","01-710-1354","01-710-1358","01-710-1368","01-710-1385","01-710-1408","01-711-1012","01-711-1036","01-711-1143","01-711-1433","01-713-1043","01-713-1073","01-713-1106","01-713-1141","01-713-1179","01-713-1209","01-713-1256","01-713-1269","01-713-1448","01-714-1035","01-714-1068","01-714-1195","01-714-1288","01-714-1375","01-714-1425","01-715-1085","01-715-1107","01-715-1155","01-715-1207","01-715-1319","01-715-1321","01-715-1397","01-715-1405","01-716-1024","01-716-1026","01-716-1030","01-716-1044","01-716-1063","01-716-1071","01-716-1094","01-716-1103","01-716-1108","01-716-1151","01-716-1157","01-716-1160","01-716-1167","01-716-1177","01-716-1189","01-716-1229","01-716-1298","01-716-1308","01-716-1311","01-716-1364","01-716-1373","01-716-1418","01-716-1441","01-716-1447","01-717-1004","01-717-1109","01-717-1174","01-717-1201","01-717-1344","01-717-1357","01-717-1446","01-718-1066","01-718-1079","01-718-1101","01-718-1139","01-718-1150","01-718-1170","01-718-1172","01-718-1250","01-718-1254","01-718-1328","01-718-1355","01-718-1371","01-718-1427"],["Placebo","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Xanomeline High Dose","Placebo","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Placebo","Placebo","Placebo","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose"],[0,0,81,54,81,0,54,54,54,0,0,81,81,81,0,81,81,54,54,0,54,0,81,81,81,54,81,54,54,54,0,81,0,81,0,0,0,54,0,54,81,54,0,81,54,0,0,54,0,54,54,0,81,54,81,0,81,54,81,81,81,54,0,81,54,81,81,81,54,54,0,54,0,54,0,81,0,81,54,54,81,0,0,0,0,0,54,0,0,54,81,81,0,54,81,81,0,81,81,54,54,0,81,54,54,0,54,54,54,0,0,0,81,81,81,81,0,54,0,0,54,0,81,0,81,54,54,81,0,81,54,0,54,54,81,54,0,81,54,81,54,81,0,54,0,0,81,0,54,81,0,81,54,81,81,0,54,54,0,81,0,0,0,81,81,54,54,0,81,54,81,0,54,0,81,54,0,0,81,54,0,54,81,81,0,54,81,54,54,81,81,0,81,0,0,54,0,54,54,81,0,81,54,54,0,0,81,81,0,54,0,0,81,0,54,81,54,54,0,54,54,0,54,0,81,81,54,0,54,81,81,81,0,81,54,81,81,0,0,81,54,54,54,81,0,0,54,0,54,54,81,0,81,81],["Placebo","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Xanomeline High Dose","Placebo","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Placebo","Placebo","Placebo","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Placebo","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Placebo","Placebo","Xanomeline High Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline High Dose","Xanomeline High Dose","Placebo","Placebo","Xanomeline High Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Placebo","Xanomeline Low Dose","Placebo","Xanomeline Low Dose","Xanomeline Low Dose","Xanomeline High Dose","Placebo","Xanomeline High Dose","Xanomeline High Dose"],[0,0,81,54,81,0,54,54,54,0,0,81,81,81,0,81,81,54,54,0,54,0,81,81,81,54,81,54,54,54,0,81,0,81,0,0,0,54,0,54,81,54,0,81,54,0,0,54,0,54,54,0,81,54,81,0,81,54,81,81,81,54,0,81,54,81,81,81,54,54,0,54,0,54,0,81,0,81,54,54,81,0,0,0,0,0,54,0,0,54,81,81,0,54,81,81,0,81,81,54,54,0,81,54,54,0,54,54,54,0,0,0,81,81,81,81,0,54,0,0,54,0,81,0,81,54,54,81,0,81,54,0,54,54,81,54,0,81,54,81,54,81,0,54,0,0,81,0,54,81,0,81,54,81,81,0,54,54,0,81,0,0,0,81,81,54,54,0,81,54,81,0,54,0,81,54,0,0,81,54,0,54,81,81,0,54,81,54,54,81,81,0,81,0,0,54,0,54,54,81,0,81,54,54,0,0,81,81,0,54,0,0,81,0,54,81,54,54,0,54,54,0,54,0,81,81,54,0,54,81,81,81,0,81,54,81,81,0,0,81,54,54,54,81,0,0,54,0,54,54,81,0,81,81],["2014-01-02","2012-08-05","2013-07-19","2014-03-18","2014-07-01","2013-02-12","2014-01-01","2012-09-07","2012-11-30","2014-03-12","2014-02-15","2012-10-28","2013-05-20","2013-08-23","2013-09-23","2013-02-12","2013-12-05","2013-02-15","2012-07-22","2013-02-02","2012-11-15","2013-03-30","2014-01-11","2014-02-07","2014-01-25","2013-03-24","2013-08-29","2014-05-22","2012-10-02","2013-01-05","2013-10-08","2013-07-31","2013-05-30","2013-02-04","2014-03-12","2012-10-28","2013-09-23","2013-03-19","2013-08-08","2013-10-26","2013-01-05","2013-07-26","2013-03-02","2013-10-25","2012-09-02","2013-01-25","2013-03-13","2013-02-20","2013-12-20","2013-10-17","2013-06-16","2013-03-16","2012-07-20","2013-05-13","2013-11-21","2012-09-12","2014-03-17","2013-09-22","2012-12-12","2014-03-12","2013-01-13","2013-08-27","2014-02-21","2013-10-06","2013-09-27","2013-10-24","2014-01-22","2013-03-15","2013-01-23","2013-12-02","2013-10-02","2013-10-31","2012-09-19","2012-11-19","2013-03-21","2013-08-25","2012-08-30","2013-10-13","2013-07-08","2014-04-23","2013-12-09","2013-10-12","2012-12-07","2012-11-17","2014-05-11","2013-07-05","2013-11-27","2013-08-05","2014-01-08","2013-09-16","2014-01-17","2013-11-28","2012-12-26","2013-10-14","2013-12-16","2013-11-02","2013-03-10","2014-01-04","2013-05-13","2012-09-07","2013-06-23","2013-12-31","2013-05-14","2012-09-15","2013-12-20","2013-10-28","2013-12-20","2013-02-09","2013-05-09","2012-10-22","2014-02-08","2012-12-06","2013-12-29","2013-02-09","2012-10-24","2013-09-21","2013-05-07","2013-02-06","2013-09-10","2013-06-14","2013-01-25","2013-08-23","2012-12-07","2012-12-29","2013-04-20","2013-08-05","2013-07-04","2013-04-12","2013-09-03","2013-12-26","2013-11-09","2013-10-08","2012-07-31","2012-12-01","2012-12-25","2014-01-18","2014-04-12","2013-10-25","2013-01-15","2013-08-02","2013-03-04","2013-05-15","2013-01-26","2013-03-24","2013-07-19","2014-02-03","2013-06-19","2014-04-20","2013-04-05","2013-08-15","2012-12-23","2013-03-03","2014-01-14","2013-02-10","2013-09-27","2014-02-28","2013-06-03","2012-12-26","2013-01-01","2012-09-08","2013-11-17","2013-09-17","2013-07-22","2013-10-11","2012-10-02","2014-03-29","2012-11-30","2013-11-16","2012-11-10","2012-09-26","2013-12-28","2013-06-13","2014-02-12","2012-09-27","2012-12-24","2012-12-15","2013-04-24","2013-02-27","2012-11-11","2012-09-17","2013-10-23","2012-10-29","2013-01-05","2013-04-03","2012-07-29","2013-04-03","2013-01-27","2013-09-15","2014-03-30","2012-10-31","2013-05-31","2013-08-09","2013-05-27","2012-09-19","2014-01-27","2014-01-19","2014-04-17","2013-08-08","2013-04-26","2013-12-04","2013-02-26","2013-08-15","2013-02-16","2013-02-26","2013-12-13","2012-11-18","2013-02-17","2014-02-11","2013-04-03","2013-07-06","2012-07-09","2014-04-02","2013-12-28","2013-04-27","2013-05-09","2013-06-08","2012-12-19","2014-03-20","2013-02-12","2013-02-01","2013-10-02","2013-04-05","2012-10-08","2014-09-02","2012-10-09","2013-02-20","2013-04-08","2013-08-28","2014-05-14","2013-07-04","2012-12-14","2013-05-05","2014-01-22","2013-12-16","2014-01-14","2014-01-27","2013-01-22","2013-12-19","2014-01-11","2013-05-01","2013-09-01","2013-07-07","2012-09-19","2013-02-17","2013-05-19","2013-01-19","2013-09-16","2013-09-21","2013-09-21","2013-07-10","2013-02-01","2013-02-28","2013-04-26","2012-12-17"],["2014-07-02","2012-09-01","2014-01-14","2014-03-31","2014-12-30","2013-03-09","2014-07-09","2012-09-16","2013-01-23","2014-09-09","2014-08-16","2013-04-28","2013-06-26","2014-02-20","2014-03-16","2013-03-18","2013-12-09","2013-03-24","2013-01-20","2013-08-03","2013-01-12","2013-09-22","2014-07-10","2014-05-31","2014-07-26","2013-06-14","2013-11-05","2014-11-20","2013-04-02","2013-01-26","2014-03-18","2013-08-05","2013-11-27","2013-08-06","2014-03-25","2013-04-28","2014-03-24","2013-04-30","2014-02-05","2014-04-26","2013-02-12","2013-10-13","2013-08-31","2013-12-24","2012-12-04","2013-03-16","2013-09-14","2013-06-13","2013-12-26","2013-12-11","2013-06-29","2013-09-06","2013-01-11","2013-06-03","2014-04-19","2013-03-13","2014-05-07","2014-03-21","2012-12-13","2014-09-11","2013-02-21","2013-09-25","2014-07-08","2013-11-18","2013-10-24","2013-12-22","2014-03-20","2013-06-17","2013-07-07","2014-02-01","2014-03-31","2014-05-16","2013-04-04","2013-05-27","2013-07-14","2013-10-09","2012-11-04","2013-12-06","2013-08-05","2014-07-04","2014-02-14","2014-04-18","2013-06-11","2013-01-09","2014-11-01","2013-07-12","2014-05-11","2013-12-05","2014-01-26","2013-09-28","2014-07-25","2014-02-27","2013-06-24","2014-05-13","2014-06-02","2014-01-23","2013-09-08","2014-03-07","2013-05-13","2013-02-01","2013-12-19","2014-07-28","2013-06-18","2012-09-24","2013-12-24","2014-04-26","2014-01-01","2013-03-01","2013-11-11","2013-04-28","2014-03-21","2013-06-04","2014-04-06","2013-02-22","2012-11-29","2013-09-21","2013-11-05","2013-03-22","2014-03-08","2013-12-12","2013-05-03","2014-03-01","2013-06-05","2013-06-28","2013-06-18","2014-02-13","2013-08-28","2013-04-19","2014-01-28","2014-07-02","2013-12-14","2014-04-08","2012-08-28","2013-06-01","2013-06-26","2014-04-27","2014-10-09","2014-04-25","2013-03-27","2013-09-26","2013-06-11","2013-08-06","2013-06-13","2013-05-23","2014-01-17","2014-06-16","2013-12-19","2014-10-19","2013-10-02","2013-08-25","2013-06-24","2013-03-07","2014-01-18","2013-08-09","2013-10-29","2014-08-29","2013-08-13","2013-02-10","2013-07-05","2013-01-22","2014-05-18","2014-03-23","2013-08-01","2013-11-13","2012-10-20","2014-04-27","2013-03-19","2014-05-17","2013-05-12","2013-03-27","2014-06-28","2013-10-11","2014-03-01","2012-11-21","2013-02-26","2013-02-15","2013-05-23","2013-07-06","2013-05-01","2013-02-09","2014-04-24","2013-02-18","2013-07-12","2013-04-29","2013-02-10","2013-05-30","2013-02-05","2014-03-24","2014-10-05","2013-05-06","2013-07-01","2014-02-05","2013-11-22","2013-03-25","2014-07-28","2014-05-16","2014-10-16","2013-10-08","2013-10-23","2014-06-17","2013-09-07","2013-08-19","2013-08-18","2013-05-07","2014-01-25","2013-05-27","2013-03-05","2014-04-21","2013-10-02","2013-07-07","2013-01-20","2014-10-16","2014-01-02","2013-11-03","2013-08-25","2013-08-01","2013-01-24","2014-09-20","2013-08-10","2013-05-11","2014-04-04","2013-10-11","2013-04-12","2015-03-05","2013-02-27","2013-03-31","2013-06-28","2013-10-07","2014-09-21","2014-01-09","2013-02-27","2013-11-20","2014-07-22","2014-06-17","2014-07-16","2014-07-28","2013-07-24","2014-02-21","2014-03-14","2013-10-14","2014-03-03","2013-07-16","2012-10-31","2013-07-31","2013-11-17","2013-07-29","2013-10-12","2013-11-29","2014-01-31","2014-01-09","2013-04-18","2013-08-29","2013-08-01","2013-02-11"],[182,28,180,14,183,26,190,10,55,182,183,183,38,182,175,35,5,38,183,183,59,177,181,114,183,83,69,183,183,22,162,6,182,184,14,183,183,43,182,183,39,80,183,61,94,51,186,114,7,56,14,175,176,22,150,183,52,181,2,184,40,30,138,44,28,60,58,95,166,62,181,198,198,190,116,46,67,55,29,73,68,189,187,54,175,8,166,123,19,13,190,92,181,212,169,83,183,63,1,148,180,210,36,10,5,181,13,21,187,189,42,181,99,14,37,1,183,45,180,182,99,191,181,182,60,193,56,8,148,189,36,183,29,183,184,100,181,183,72,56,100,84,139,61,183,134,184,183,181,11,184,5,5,181,33,183,72,47,186,137,183,188,11,34,19,30,110,183,184,183,183,121,18,56,65,63,30,130,172,146,184,113,189,27,197,58,10,191,190,188,32,181,180,188,183,118,183,62,181,196,194,5,184,71,44,191,17,70,183,2,196,198,6,191,109,55,37,185,180,100,185,190,187,185,142,40,82,41,131,190,76,200,182,184,184,183,184,65,63,167,184,10,43,165,183,192,27,70,133,184,77,183,98,57]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>usubjid<\/th>\n      <th>trt01p<\/th>\n      <th>trt01pn<\/th>\n      <th>trt01a<\/th>\n      <th>trt01an<\/th>\n      <th>trtsdt<\/th>\n      <th>trtedt<\/th>\n      <th>trtdur<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":3,"columnDefs":[{"className":"dt-right","targets":[3,5,8]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[3,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# Tidy programming API: Compose simple pieces

* Tidyverse vs Base R

  &lt;!-- - `stringr` package, in replace of `*grep()` base functions --&gt;
  &lt;!-- - `purrr` package, in replace of `*apply` base functions --&gt;
  - Reduce unnecessary intermediate objects
  - Keep data in relational formate as much as possible, e.g. data.frame
 

```r
# base R
mtcars$pounds &lt;- mt$wt * 1000
mtcars[["pounds"]] &lt;- mtcars[["wt"]] / 1000
mtcars[, "pounds"] &lt;- mtcars[, "wt"] / 1000

# Tidyverse R
mtcars &lt;- mtcars %&gt;%
  mutate(pounds = wt / 1000)
```
  

---
# The pipe! %&gt;%

* Conceptually the same with Unix pipe snytax
  - Push the LHS output into the 1st argument of the RHS function

* Natural representation of human logic
  - Each layer of process is a function
  - Enbrace Functional programming

* Similar philosophy to ggplot2
  - Grammar of Graphics

---

# #TidyTuesday

![](img/TidyTuesday_01.PNG)

---
# #TidyTuesday

![](img/TidyTuesday_02_plot.PNG)

---
# #TidyTuesday

![](img/TidyTuesday_02_code.PNG)

---
# Tidy Statistics

### `library(broom)` turns tidy output of model objects that are suited to further analysis, manipulation, and visualization.
![](img/broom_01.png)

---
# Discussion

* R/Tidyverse is fast growing
    - Adpoting new idea
    - Some rare API change caused some pain for R package developers (OK for general users)
* Enviroment/Namespace control is a common R problem
    - Loaded functions may be over-writen by loading other packages
    - More robust usage is to add package namespace: `dplyr::select()`

---
# Thanks for attending
Special thanks to 
- [Statistical Inference: A Tidy Approach](http://bit.ly/ness-infer) [@old_man_chester](https://twitter.com/old_man_chester)
- [tidyverse 101: Simplifying life for useRs](https://paulvanderlaken.com/2017/07/07/tidyverse-101-simplifying-life-for-users/)
- Slides created via the R package [xaringan](https://github.com/yihui/xaringan) by Yihui Xie
- HTML document created via the R package [rmarkdown](http://rmarkdown.rstudio.com/) by RStudio
- Slides and source code are available at &lt;https://github.com/freestatman/MBSW_2018_Tidyverse_Talk&gt;

---

layout: true
class: middle
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightLanguage": "r",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
